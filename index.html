<!doctype html>
<html lang="es">
<head>
  <!-- ===================================================================
       Boda de Abril & Pablo ‚Äî Invitaci√≥n (FINAL, una sola p√°gina)
       - HTML + CSS + JS embebidos
       - Optimizado para GitHub Pages
       - Recursos (im√°genes y audios) desde la MISMA carpeta del repo
       - Formato vertical, responsivo, animaciones suaves, parallax simple
       =================================================================== -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>Boda de Abril & Pablo üíç</title>

  <!-- Fuentes: Waltograph (solo ‚ÄúS√≠, ¬°acepto!‚Äù) y Playfair/Quicksand -->
  <link href="https://fonts.cdnfonts.com/css/waltograph" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400;1,700&family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg-cream:#F8F5F0;
      --deep:#2B2A2F;
      --glass:rgba(255,255,255,0.85);
      --glass-strong:rgba(255,255,255,0.94);
      --rose:#d6a79b;
      --accent:#66c9ff;
      --accent2:#4a8fe7;
      --wa:#25D366;
      --shadow:0 18px 50px rgba(0,0,0,.12);
      --ease:cubic-bezier(.2,.9,.2,1);

      --chip-celeste:#a8dadc;
      --chip-beige:#efe5d0;
      --chip-verde:#a8e6cf;
      --chip-gris:#c5ced6;
      --chip-rosa:#f7b6b1;

      --menu-bg: rgba(255,255,255,.92);
      --menu-shadow: 0 12px 28px rgba(0,0,0,.12);

      /* Bot√≥n musical flotante: degradado coherente con corazones */
      --music-grad: linear-gradient(135deg, #ffffff 0%, #9fd7ff 28%, #cfcfcf 64%, #a7ffcf 100%);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg-cream);color:var(--deep);font-family:Quicksand,system-ui,Arial;-webkit-font-smoothing:antialiased}
    img{max-width:100%;height:auto;display:block}
    a{color:inherit;text-decoration:none}
    button{font-family:inherit;cursor:pointer;outline:none}

    /* Sistema de secciones */
    .viewport{height:100vh;overflow:hidden;position:relative}
    .sections{height:100%;width:100%;position:relative}
    .section{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      padding:26px;
      background-size:cover; background-position:center; background-attachment:fixed; /* parallax simple */
      opacity:0; transform:translateY(24px) scale(.995);
      transition:transform .7s var(--ease), opacity .45s ease;
      will-change:transform,opacity;
    }
    .section.active{opacity:1; transform:translateY(0) scale(1)}
    .overlay{position:absolute; inset:0; background:linear-gradient(180deg,rgba(255,255,255,.28),rgba(255,255,255,.6)); pointer-events:none}

    /* Fondos */
    .bg-portada {background-image:url('fondo_floral.jpg')}
    .bg-p1      {background-image:url('fondo_floral1.png')}
    .bg-p2      {background-image:url('fondo_floral2.jpg')}
    .bg-p3      {background-image:url('fondo_floral3.jpg')}
    .bg-p4      {background-image:url('fondo_floral4.png')}
    .bg-p5      {background-image:url('fondo_floral5.jpg')}
    .bg-p6      {background-image:url('fondo_floral6.jpg')}
    .bg-p7      {background-image:url('fondo_floral7.jpg')}
    .bg-p8      {background-image:url('fondo_floral9.jpg')}
    .bg-p9      {background-image:url('fondo_floral8.png')}

    /* Tarjeta (glass) */
    .card{
      position:relative; z-index:2;
      max-width:980px; width:100%;
      background:var(--glass); backdrop-filter: blur(6px);
      border-radius:16px; padding:28px; box-shadow:var(--shadow);
    }
    .center{text-align:center}

    /* T√≠tulos y Waltograph */
    h1,h2,h3,h4{font-family:'Playfair Display',serif;margin:0 0 8px}
    .title-top{font-size:46px; letter-spacing:.6px}
    .title-acepto{
      font-family:'Waltograph',cursive;
      font-size:42px; margin-top:6px;
      background:linear-gradient(135deg,#fff,#f7e8c5 45%,#e3c792 70%,#fff);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 0 18px rgba(255,255,255,.45);
    }
    .verse{
      font-family:'Playfair Display',serif; font-style:italic; margin-top:14px; font-size:16px;
      background:linear-gradient(90deg,#b98f5a,#d6a79b);
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-align:center;
    }

    /* Botones m√°gicos */
    .btns{margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
    .magicBtn{
      padding:10px 14px; border-radius:12px; border:0;
      background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#fff; font-weight:700;
      box-shadow:0 10px 30px rgba(74,143,231,.18); transition:filter .2s, transform .2s;
    }
    .magicBtn:hover{filter:brightness(1.05); transform:translateY(-1px)}

    /* Anillo */
    .ring-button{background:transparent; border:0; padding:0; cursor:pointer; display:block; margin:12px auto; position:relative}
    .ring-svg{width:220px; height:220px; display:block}
    .ring-rotate{animation:ringSpin 14s linear infinite; transform-origin:110px 110px}
    @keyframes ringSpin{to{transform:rotate(360deg)}}
    .ring-instruction{font-size:13px;color:#333;margin-top:6px}

    /* Contador mini (portada) */
    .mini-flip{display:flex; gap:10px; justify-content:center; margin-top:12px; align-items:center}
    .flip-mini{width:72px; height:72px; perspective:800px; position:relative}
    .flip-mini .face{
      position:absolute; left:0; top:0; width:100%; height:50%;
      overflow:hidden; border-radius:12px; background:var(--glass-strong);
      display:flex; align-items:center; justify-content:center;
      font-weight:800; font-size:22px; font-family:'Playfair Display',serif;
      box-shadow:0 10px 26px rgba(0,0,0,.08);
    }
    .flip-mini .top{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom}
    .flip-mini .bottom{top:50%;border-top-left-radius:0;border-top-right-radius:0;transform-origin:top}
    .flip-mini.animate .top{animation:flipTop .7s forwards}
    .flip-mini.animate .bottom{animation:flipBottom .7s forwards}

    /* Contador grande */
    .flip-grid{display:flex; gap:12px; justify-content:center; align-items:center; margin-top:18px; flex-wrap:wrap}
    .flip{width:100px; height:96px; perspective:900px; position:relative}
    .flip .panel{
      position:absolute; left:0; top:0; width:100%; height:100%; border-radius:12px;
      background:var(--glass-strong); display:flex; align-items:center; justify-content:center;
      font-family:'Playfair Display',serif; font-size:28px; box-shadow:0 10px 30px rgba(0,0,0,.08);
    }
    .flip .top{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom;z-index:2}
    .flip .bottom{top:50%;border-top-left-radius:0;border-top-right-radius:0;transform-origin:top;z-index:1}
    .flip.animate .top{animation:flipTop .7s forwards}
    .flip.animate .bottom{animation:flipBottom .7s forwards}
    .flip .label{font-size:12px; color:#333; margin-top:8px; text-align:center}
    @keyframes flipTop{0%{transform:rotateX(0)}100%{transform:rotateX(-180deg)}}
    @keyframes flipBottom{0%{transform:rotateX(180deg)}100%{transform:rotateX(0)}}

    /* Familias */
    .parents-grid{display:flex; gap:20px; align-items:stretch; justify-content:space-between; margin-top:16px}
    .parent-col{flex:1; min-width:220px; display:flex; align-items:center; justify-content:center}
    .parent-names{font-family:'Playfair Display',serif; font-size:22px; line-height:1.25; text-align:center}
    .couple-names{font-family:'Playfair Display',serif; font-size:28px; margin-top:18px; text-align:center}

    /* Foto + Verso */
    .photo-romantic{
      width:420px; max-width:92%; border-radius:16px; box-shadow:0 16px 42px rgba(0,0,0,.16);
      object-fit:cover; transition:transform .45s var(--ease), opacity .45s var(--ease);
    }
    .photo-romantic:hover{transform:scale(1.03)}
    .verse-big{font-family:'Playfair Display',serif; font-size:18px; margin-top:12px; text-align:center}

    /* Itinerario */
    .itinerary{display:flex; flex-direction:column; gap:14px; margin-top:12px}
    .it-item{
      display:flex; gap:12px; align-items:flex-start; padding:14px; border-radius:12px;
      background:var(--glass-strong); box-shadow:0 10px 28px rgba(0,0,0,.08);
      opacity:0; transform:translateY(14px); transition:opacity .6s, transform .6s;
    }
    .it-item.show{opacity:1; transform:translateY(0)}
    .it-icon{width:56px; height:56px; border-radius:10px; background:rgba(255,255,255,.92); display:flex; align-items:center; justify-content:center; font-size:22px}
    .it-info strong{display:block}
    .map-link{display:inline-block; margin-top:6px; color:#2b87e6; text-decoration:underline}
    .palette{display:flex; gap:8px; margin-top:8px}
    .chip{width:22px; height:22px; border-radius:6px}

    /* Galer√≠a */
    .gallery-grid{display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:12px}
    .gallery-grid img{
      width:260px; height:176px; object-fit:cover; border-radius:12px;
      box-shadow:0 10px 30px rgba(0,0,0,.12); cursor:pointer; transition:transform .35s, opacity .35s;
    }
    .gallery-grid img:hover{transform:scale(1.03); opacity:.96}
    .gallery-controls{margin-top:12px; text-align:center}

    /* Colaborativa / finales */
    .collab-photo{
      width:100%; max-width:860px; border-radius:14px; box-shadow:0 14px 40px rgba(0,0,0,.14);
      object-fit:cover; transition:transform .45s var(--ease);
    }
    .collab-photo:hover{transform:scale(1.02)}
    .final-title{font-family:'Playfair Display',serif; font-size:26px; text-align:center}
    .final-sub{margin-top:8px; color:#666; text-align:center}
    .wa-row{display:flex; gap:12px; justify-content:center; margin-top:14px; flex-wrap:wrap}
    .wa-btn{
      display:inline-flex; gap:8px; align-items:center; padding:10px 14px; border-radius:999px;
      background:var(--wa); color:#fff; text-decoration:none; font-weight:700; box-shadow:0 10px 30px rgba(0,0,0,.12)
    }
    .wa-svg{width:18px; height:18px; display:inline-block; vertical-align:middle; fill:#fff}

    /* Lightbox */
    .lb{position:fixed; inset:0; background:rgba(0,0,0,.85); display:none; align-items:center; justify-content:center; z-index:3000}
    .lb.open{display:flex}
    .lb img{max-width:94%; max-height:86%; border-radius:10px; box-shadow:0 20px 60px rgba(0,0,0,.6); transition:opacity .45s ease, transform .45s ease}
    .close-lb{position:fixed; right:18px; top:18px; background:rgba(255,255,255,.92); border-radius:999px; padding:8px; border:0; cursor:pointer}
    .lb-nav{position:fixed; left:6px; right:6px; top:50%; display:flex; justify-content:space-between; pointer-events:none}
    .lb-nav button{pointer-events:all; background:rgba(255,255,255,.92); border-radius:999px; padding:10px 12px; border:0; cursor:pointer}

    /* Flechas de navegaci√≥n */
    .nav{position:fixed; top:50%; left:0; right:0; display:flex; justify-content:space-between; pointer-events:none; z-index:990; transform:translateY(-50%)}
    .nav button{pointer-events:all; background:rgba(255,255,255,.95); border:0; padding:10px 12px; border-radius:999px; font-size:28px; cursor:pointer; margin:8px; box-shadow:0 10px 30px rgba(0,0,0,.12)}

    /* Men√∫ lateral flotante */
    .side-menu{
      position:fixed; right:18px; top:50%; transform:translateY(-50%);
      background:var(--menu-bg); border-radius:16px; box-shadow: var(--menu-shadow);
      padding:10px 8px; z-index: 995; backdrop-filter: blur(6px);
    }
    .side-menu a{
      display:flex; align-items:center; gap:8px;
      padding:10px 12px; border-radius:12px; margin:6px 0;
      font-weight:700; color:#233; transition: background .2s, transform .2s; white-space: nowrap;
    }
    .side-menu a:hover{ background: rgba(35,117,255,.08); transform: translateX(-1px); }
    .side-menu a.active{ background: rgba(35,117,255,.16); }
    .side-menu .icon{ width:18px; text-align:center }
    .menu-toggle{
      position:fixed; right:18px; bottom:18px;
      width:48px; height:48px; border-radius:50%;
      background: linear-gradient(135deg,var(--accent),var(--accent2));
      color:#fff; display:flex; align-items:center; justify-content:center; font-size:20px; border:0; box-shadow: var(--menu-shadow);
      z-index: 996;
    }
    .side-menu.compact{ display:none; }
    .side-menu.open{ display:block; }

    /* Overlay de inicio (autoplay seguro) */
    #startOverlay{
      position:fixed; left:50%; top:50%; transform:translate(-50%,-50%);
      z-index:4000; background:rgba(255,255,255,.98);
      padding:18px; border-radius:12px; box-shadow:0 18px 60px rgba(0,0,0,.18);
      opacity:1; transition:opacity .45s, transform .45s; text-align:center;
    }
    #startOverlay.hide{opacity:0; pointer-events:none}

    /* Cursor m√°gico (corazones) */
    .magicHeart{position:fixed; pointer-events:none; z-index:99999; width:22px; height:22px; opacity:0; transform:translate(-50%,-50%) scale(1); animation:heartFade 1000ms forwards}
    @keyframes heartFade{0%{opacity:1;transform:translate(-50%,-50%) scale(1)}100%{opacity:0;transform:translate(-50%,-120%) scale(.6)}}

    /* Bot√≥n musical flotante (aparece solo si el audio fue bloqueado) */
    #musicRetry{
      position:fixed; right:16px; bottom:16px; z-index:3500;
      width:48px; height:48px; border-radius:50%;
      display:none; align-items:center; justify-content:center;
      background: var(--music-grad);
      color:#1d4033; font-size:22px; box-shadow:0 10px 32px rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.6);
      animation: pulseGlow 2.4s ease-in-out infinite;
    }
    #musicRetry[aria-hidden="false"]{ display:flex; }
    #musicRetry:hover{ filter:brightness(1.06) }
    #musicRetry::after{
      content: attr(aria-label);
      position:absolute; right:56px; bottom:12px; white-space:nowrap;
      background:rgba(0,0,0,.65); color:#fff; font-size:12px; padding:6px 8px; border-radius:8px;
      transform:translateY(4px); opacity:0; pointer-events:none; transition:opacity .25s, transform .25s;
    }
    #musicRetry:hover::after{ opacity:1; transform:translateY(0) }
    @keyframes pulseGlow{
      0%,100%{ box-shadow:0 10px 32px rgba(0,0,0,.18), 0 0 0 0 rgba(103,210,204,.22) }
      50%{ box-shadow:0 12px 40px rgba(0,0,0,.24), 0 0 0 12px rgba(103,210,204,.04) }
    }

    /* Responsive */
    @media (max-width:900px){
      .title-top{font-size:36px}
      .title-acepto{font-size:28px}
      .ring-svg{width:160px;height:160px}
      .parent-names{font-size:20px}
      .couple-names{font-size:24px}
      .photo-romantic{width:300px}
      .gallery-grid img{width:44vw;height:32vw}
      .flip{width:84px;height:78px}
      .flip-mini{width:64px;height:64px}
      .card{padding:16px;border-radius:12px}
    }
    @media (max-width: 880px){
      .side-menu.compact{ display:block; }
      .side-menu{ display:none; right:12px; top:auto; bottom:78px; transform:none; }
    }
  </style>
</head>

<body>
  <!-- Audios -->
  <audio id="marcha" src="marcha_nupcial.mp3" preload="auto" loop></audio>
  <audio id="eternamente" src="eternamente.mp3" preload="auto"></audio>

  <div class="viewport">
    <div class="sections" id="sections">

      <!-- PORTADA -->
      <section id="sec-portada" class="section bg-portada active" aria-label="Portada">
        <div class="overlay"></div>
        <div class="card center">
          <h1 class="title-top">Abril &amp; Pablo</h1>
          <div class="title-acepto">S√≠, ¬°acepto!</div>

          <!-- Anillo -->
          <button class="ring-button" id="ringBtn" aria-label="Anillo: abrir invitaci√≥n">
            <svg class="ring-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
              <defs>
                <radialGradient id="ringMetal" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#e9eef2"/>
                  <stop offset="60%" stop-color="#c9ccd0"/>
                  <stop offset="100%" stop-color="var(--rose)"/>
                </radialGradient>
                <radialGradient id="blueGem" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" stop-color="#dff6ff"/>
                  <stop offset="60%" stop-color="#66c9ff"/>
                  <stop offset="100%" stop-color="#004c99"/>
                </radialGradient>
              </defs>
              <g class="ring-rotate">
                <ellipse cx="100" cy="100" rx="40" ry="12" stroke="url(#ringMetal)" stroke-width="12" fill="none"/>
                <path d="M100 58 L110 70 L100 86 L90 70 Z" fill="url(#blueGem)" stroke="#fff" stroke-opacity="0.4" stroke-width="0.6">
                  <animateTransform attributeName="transform" type="scale" values="1;1.05;1" dur="2.6s" repeatCount="indefinite"/>
                </path>
                <circle cx="100" cy="60" r="2" fill="#fff" opacity="0.9">
                  <animate attributeName="r" values="2;4;2" dur="1.6s" repeatCount="indefinite"/>
                </circle>
              </g>
            </svg>
          </button>
          <div class="ring-instruction"><em>Da clic en el anillo para abrir</em></div>

          <!-- Contador mini -->
          <div class="mini-flip" id="miniFlip">
            <div class="flip-mini" data-k="d"><div class="face top">00</div><div class="face bottom">00</div></div>
            <div class="flip-mini" data-k="h"><div class="face top">00</div><div class="face bottom">00</div></div>
            <div class="flip-mini" data-k="m"><div class="face top">00</div><div class="face bottom">00</div></div>
            <div class="flip-mini" data-k="s"><div class="face top">00</div><div class="face bottom">00</div></div>
          </div>

          <!-- Vers√≠culo -->
          <p class="verse">"Quien halla esposa halla el bien" ‚Äî <strong>Proverbios 18:22</strong></p>

          <!-- Botones m√°gicos -->
          <div class="btns">
            <button class="magicBtn" data-target="sec-familias">Nuestras familias</button>
            <button class="magicBtn" data-target="sec-itinerario">Itinerario</button>
            <button class="magicBtn" data-target="sec-galeria">Galer√≠a</button>
            <button class="magicBtn" data-target="sec-rsvp">Confirmar asistencia</button>
          </div>
        </div>
      </section>

      <!-- P1 ‚Äî FAMILIAS -->
      <section id="sec-familias" class="section bg-p1" aria-label="Familias">
        <div class="overlay"></div>
        <div class="card center">
          <h2>Padres de los novios</h2>
          <div class="parents-grid" style="margin-top:16px">
            <div class="parent-col">
              <div class="parent-names">
                Padres de la novia<br />
                <strong>Eva Aguilar Rend√≥n</strong><br />
                <strong>Pedro P√©rez Hern√°ndez</strong>
              </div>
            </div>
            <div class="parent-col">
              <div class="parent-names">
                Padres del novio<br />
                <strong>Saray Hern√°ndez Santana</strong><br />
                <strong>Pablo Tinoco Carranza <span title="finado">‚úù</span></strong>
              </div>
            </div>
          </div>
          <div style="margin-top:18px;font-family:'Playfair Display',serif;font-size:18px">
            Tienen el honor de compartir la dicha que enlaza a sus amados hijos.
          </div>
          <div class="couple-names">Abril P√©rez Aguilar &amp; Pablo Eliel Tinoco Hern√°ndez</div>
        </div>
      </section>

      <!-- P2 ‚Äî FOTO + VERS√çCULO -->
      <section id="sec-foto-verse" class="section bg-p2" aria-label="Foto y vers√≠culo">
        <div class="overlay"></div>
        <div class="card center">
          <img src="foto1.jpg" alt="Abril y Pablo" class="photo-romantic lb-target" data-src="foto1.jpg">
          <p class="verse-big">‚ÄúAs√≠ que no son ya m√°s dos, sino una sola carne; por tanto, lo que Dios junt√≥, no lo separe el hombre.‚Äù ‚Äî <strong>Mateo 19:6</strong></p>
        </div>
      </section>

      <!-- P3 ‚Äî ITINERARIO + CONTADOR GRANDE -->
      <section id="sec-itinerario" class="section bg-p3" aria-label="Itinerario">
        <div class="overlay"></div>
        <div class="card">
          <h2>Itinerario</h2>
          <div class="itinerary" id="itineraryList">
            <div class="it-item">
              <div class="it-icon">üìÖ</div>
              <div class="it-info">
                <strong>Fecha del evento</strong>
                <div>28 de diciembre del 2025</div>
              </div>
            </div>
            <div class="it-item">
              <div class="it-icon">‚õ™</div>
              <div class="it-info">
                <strong>Ceremonia Religiosa ‚Äî 2:00 p.m.</strong>
                <div>Iglesia cristiana "Palabra de vida AD"</div>
                <div>Rodeo #35, Gabriel Tepepa, CP. 62980, Tlaquiltenango, Morelos</div>
                <a class="map-link" href="https://maps.app.goo.gl/AWYkNZ44jyshjRUG6" target="_blank" rel="noopener">Mapa de ubicaci√≥n</a>
              </div>
            </div>
            <div class="it-item">
              <div class="it-icon">üéâ</div>
              <div class="it-info">
                <strong>Recepci√≥n ‚Äî 4:00 p.m.</strong>
                <div>Jard√≠n Los Abuelos</div>
                <div>Insurgentes #819, Gabriel Tepepa, CP. 62980, Tlaquiltenango, Morelos</div>
                <a class="map-link" href="https://maps.app.goo.gl/B2W65gnaMnyodGh56" target="_blank" rel="noopener">Mapa de ubicaci√≥n</a>
              </div>
            </div>
            <div class="it-item">
              <div class="it-icon">üëó</div>
              <div class="it-info">
                <strong>C√≥digo de vestimenta</strong>
                <div>Formal ‚Äî Tonos recomendados: celestes, beige, verde, gris, rosa</div>
                <div class="palette">
                  <div class="chip" style="background:var(--chip-celeste)" title="Celeste"></div>
                  <div class="chip" style="background:var(--chip-beige)"  title="Beige"></div>
                  <div class="chip" style="background:var(--chip-verde)"   title="Verde"></div>
                  <div class="chip" style="background:var(--chip-gris)"    title="Gris"></div>
                  <div class="chip" style="background:var(--chip-rosa)"    title="Rosa"></div>
                </div>
                <div style="margin-top:6px;font-style:italic;color:#666">Dejemos el blanco para la novia.</div>
              </div>
            </div>
          </div>

          <!-- Contador grande -->
          <div style="margin-top:18px;text-align:center">
            <div style="font-family:'Playfair Display',serif;font-size:18px;color:#333">Faltan para nuestro gran d√≠a</div>
            <div class="flip-grid" id="mainFlip">
              <div class="flip" data-key="days"><div class="panel top">00</div><div class="panel bottom">00</div><div class="label">D√≠as</div></div>
              <div class="flip" data-key="hours"><div class="panel top">00</div><div class="panel bottom">00</div><div class="label">Horas</div></div>
              <div class="flip" data-key="mins"><div class="panel top">00</div><div class="panel bottom">00</div><div class="label">Minutos</div></div>
              <div class="flip" data-key="secs"><div class="panel top">00</div><div class="panel bottom">00</div><div class="label">Segundos</div></div>
            </div>
            <div style="margin-top:8px;color:#666">28 de diciembre del 2025 ‚Äî 2:00 p.m.</div>
          </div>
        </div>
      </section>

      <!-- P4 ‚Äî GALER√çA NOVIOS -->
      <section id="sec-galeria" class="section bg-p4" aria-label="Galer√≠a novios">
        <div class="overlay"></div>
        <div class="card">
          <h2>Galer√≠a ‚Äî Los novios</h2>
          <div class="gallery-grid" id="galleryGrid">
            <img src="momento1.jpg" alt="momento1" class="lb-target" data-src="momento1.jpg">
            <img src="momento2.jpg" alt="momento2" class="lb-target" data-src="momento2.jpg">
            <img src="momento3.jpg" alt="momento3" class="lb-target" data-src="momento3.jpg">
            <img src="momento4.jpg" alt="momento4" class="lb-target" data-src="momento4.jpg">
            <img src="momento5.jpg" alt="momento5" class="lb-target" data-src="momento5.jpg">
            <img src="momento6.jpg" alt="momento6" class="lb-target" data-src="momento6.jpg">
            <img src="momento7.jpg" alt="momento7" class="lb-target" data-src="momento7.jpg">
          </div>
          <div class="gallery-controls">
            <button id="prevGallery" class="magicBtn">Anterior</button>
            <button id="nextGallery" class="magicBtn">Siguiente</button>
          </div>
        </div>
      </section>

      <!-- P5 ‚Äî RSVP + DESEOS (formularios en pesta√±a nueva) -->
      <section id="sec-rsvp" class="section bg-p5" aria-label="RSVP y Buenos Deseos">
        <div class="overlay"></div>
        <div class="card">
          <h2>Confirmaci√≥n de asistencia</h2>
          <p class="note">Se abrir√° en una pesta√±a nueva. Tu confirmaci√≥n se guarda en Google Sheets.</p>
          <div style="text-align:center;margin-top:12px">
            <a class="magicBtn" href="https://script.google.com/macros/s/AKfycbyDEgVJzj-vGvwxFE1eqTmKb4pO4__lXB9gX8gMKGc2yGhlzR15AFPY8vQMvnjoNs01Vg/exec" target="_blank" rel="noopener">Abrir formulario RSVP</a>
          </div>
          <hr style="margin:18px 0;border:none;border-top:1px solid rgba(0,0,0,.06)">
          <h2>Buenos deseos</h2>
          <p class="note">Se abrir√° en pesta√±a nueva. Tus palabras se guardar√°n en Google Sheets en tiempo real.</p>
          <div style="text-align:center;margin-top:12px">
            <a class="magicBtn" href="https://script.google.com/macros/s/AKfycbwY2G6aHz1-W9Sk3CUspgJYNf2EhEchr_gNk4mvaZS4wXn7sKIfIV3Qy-Wje2UCKdgC/exec" target="_blank" rel="noopener">Abrir formulario de deseos</a>
          </div>
        </div>
      </section>

      <!-- P6 ‚Äî COLABORATIVA + MOMENTO9 -->
      <section id="sec-colaborativa" class="section bg-p6" aria-label="Galer√≠a colaborativa">
        <div class="overlay"></div>
        <div class="card center">
          <h2>Galer√≠a colaborativa</h2>
          <img src="momento9.jpg" alt="momento9" class="collab-photo lb-target" data-src="momento9.jpg" style="margin-top:12px">
          <div style="margin-top:12px">
            <a class="magicBtn" href="https://docs.google.com/forms/d/e/1FAIpQLSfDX9Ky8YrQ962Uxh5ibEYGDk2WsyyVUxUPC09IcwrBKlHx7A/viewform?usp=header" target="_blank" rel="noopener">
              Subir tus fotos o videos
            </a>
          </div>
        </div>
      </section>

      <!-- P7 ‚Äî MOMENTO8 + FRASE -->
      <section id="sec-momento8" class="section bg-p7" aria-label="Momento 8">
        <div class="overlay"></div>
        <div class="card center">
          <img src="momento8.jpg" alt="momento8" class="collab-photo lb-target" data-src="momento8.jpg">
          <p style="margin-top:12px;font-family:'Playfair Display',serif;font-size:18px">
            "Tu amor es lo que he anhelado y el regalo que Dios me ha dado"
          </p>
        </div>
      </section>

      <!-- P8 ‚Äî FINAL (WhatsApp + Calendario) -->
      <section id="sec-final" class="section bg-p8" aria-label="Final">
        <div class="overlay"></div>
        <div class="card center">
          <img src="momento5.jpg" alt="momento5" class="collab-photo lb-target" data-src="momento5.jpg" style="margin-bottom:12px">
          <div class="final-title">Con amor eterno</div>
          <div style="font-family:'Playfair Display',serif;font-size:22px;margin-top:6px">Abril &amp; Pablo</div>
          <div class="final-sub">Gracias por ser parte de nuestro d√≠a especial</div>
          <div class="wa-row">
            <a class="wa-btn" href="https://wa.me/5217774914500" target="_blank" rel="noopener" aria-label="WhatsApp Abril">
              <svg class="wa-svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M20.52 3.48A11.85 11.85 0 0 0 12 0C5.37 0 .01 5.37.01 12.01 0 14.22.52 16.29 1.48 18.08L0 24l6.15-1.6A11.9 11.9 0 0 0 12 24c6.63 0 12-5.37 12-11.99 0-3.2-1.25-6.17-3.48-8.53zM12 21.6c-1.78 0-3.45-.46-4.94-1.31l-.35-.2-3.66.95.98-3.56-.23-.36A8.3 8.3 0 0 1 3.6 12.01C3.6 7.05 7.04 3.6 12 3.6s8.4 3.45 8.4 8.41S16.96 21.6 12 21.6z" fill="#fff"/>
              </svg>
              WhatsApp Abril
            </a>
            <a class="wa-btn" href="https://wa.me/5217341123645" target="_blank" rel="noopener" aria-label="WhatsApp Pablo">
              <svg class="wa-svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M20.52 3.48A11.85 11.85 0 0 0 12 0C5.37 0 .01 5.37.01 12.01 0 14.22.52 16.29 1.48 18.08L0 24l6.15-1.6A11.9 11.9 0 0 0 12 24c6.63 0 12-5.37 12-11.99 0-3.2-1.25-6.17-3.48-8.53zM12 21.6c-1.78 0-3.45-.46-4.94-1.31l-.35-.2-3.66.95.98-3.56-.23-.36A8.3 8.3 0 0 1 3.6 12.01C3.6 7.05 7.04 3.6 12 3.6s8.4 3.45 8.4 8.41S16.96 21.6 12 21.6z" fill="#fff"/>
              </svg>
              WhatsApp Pablo
            </a>
          </div>
          <div style="margin-top:12px">
            <a class="magicBtn" href="#" id="addCalendar">Agregar al calendario</a>
          </div>
        </div>
      </section>

      <!-- P9 ‚Äî FONDO DECORATIVO -->
      <section id="sec-fondo-final" class="section bg-p9" aria-label="Fondo final">
        <div class="overlay"></div>
        <div class="card center">
          <p style="font-family:'Playfair Display',serif">¬°Gracias por visitar nuestra invitaci√≥n!</p>
        </div>
      </section>
    </div>

    <!-- Flechas (ocultas en portada) -->
    <div class="nav" id="navArrows">
      <div><button id="prevBtn" aria-label="Anterior">‚Äπ</button></div>
      <div><button id="nextBtn" aria-label="Siguiente">‚Ä∫</button></div>
    </div>

    <!-- Men√∫ lateral -->
    <nav class="side-menu compact" id="sideMenu" aria-label="Navegaci√≥n r√°pida">
      <a href="#sec-portada"       data-goto="sec-portada"><span class="icon">üè†</span> Portada</a>
      <a href="#sec-familias"      data-goto="sec-familias"><span class="icon">üë™</span> Familias</a>
      <a href="#sec-foto-verse"    data-goto="sec-foto-verse"><span class="icon">üíû</span> Foto &amp; Verso</a>
      <a href="#sec-itinerario"    data-goto="sec-itinerario"><span class="icon">üóìÔ∏è</span> Itinerario</a>
      <a href="#sec-galeria"       data-goto="sec-galeria"><span class="icon">üì∏</span> Galer√≠a</a>
      <a href="#sec-rsvp"          data-goto="sec-rsvp"><span class="icon">üíå</span> Confirmaci√≥n</a>
      <a href="#sec-colaborativa"  data-goto="sec-colaborativa"><span class="icon">ü§≥</span> Colaborativa</a>
      <a href="#sec-momento8"      data-goto="sec-momento8"><span class="icon">üíö</span> Momento 8</a>
      <a href="#sec-final"         data-goto="sec-final"><span class="icon">üåü</span> Final</a>
    </nav>
    <button class="menu-toggle" id="menuToggle" aria-label="Abrir men√∫">‚ò∞</button>

    <!-- Lightbox -->
    <div class="lb" id="lightbox" aria-hidden="true" role="dialog">
      <button class="close-lb" id="lbClose" aria-label="Cerrar">‚úï</button>
      <div class="lb-nav">
        <button id="lbPrev" aria-label="Anterior">‚Äπ</button>
        <button id="lbNext" aria-label="Siguiente">‚Ä∫</button>
      </div>
      <img id="lbImg" src="" alt="Imagen ampliada">
    </div>

    <!-- Overlay inicio (autoplay) -->
    <div id="startOverlay" role="dialog" aria-modal="true">
      <h3 style="font-family:'Playfair Display',serif;margin-bottom:6px">Toca para comenzar üíç</h3>
      <p style="color:#666;margin-bottom:12px">Pulsa para iniciar la m√∫sica y explorar la invitaci√≥n.</p>
      <div style="text-align:center"><button id="startBtn" class="magicBtn">Toca para comenzar</button></div>
      <p id="audioMsg" style="font-size:13px;color:#999;margin-top:10px;display:none">Si no escuchas la m√∫sica, pulsa nuevamente üéµ</p>
    </div>

    <!-- Bot√≥n musical flotante (aparece solo si el audio fue bloqueado) -->
    <button id="musicRetry" aria-label="Reproducir m√∫sica" title="Reproducir m√∫sica" aria-hidden="true">üéµ</button>
  </div>

  <script>
    /* ============================ SECCIONES ============================ */
    const order = [
      'sec-portada','sec-familias','sec-foto-verse','sec-itinerario',
      'sec-galeria','sec-rsvp','sec-colaborativa','sec-momento8',
      'sec-final','sec-fondo-final'
    ];
    const sections = order.map(id => document.getElementById(id));
    let current = 0;

    function show(i){
      i = ((i % sections.length) + sections.length) % sections.length;
      const prev = sections[current];
      const next = sections[i];
      if(prev){
        prev.style.transition='transform .55s var(--ease), opacity .45s ease';
        prev.style.transform='translateY(-12px) scale(.995)';
        prev.style.opacity='0';
      }
      sections.forEach(s=>s.classList.remove('active'));
      next.classList.add('active');
      next.style.transform='translateY(24px) scale(.995)';
      requestAnimationFrame(()=>{
        next.style.transition='transform .7s var(--ease), opacity .45s ease';
        next.style.transform='translateY(0) scale(1)';
        next.style.opacity='1';
      });
      current = i;
      const hide = (order[i] === 'sec-portada');
      document.querySelectorAll('#navArrows button').forEach(b=>b.style.display = hide ? 'none':'block');
      markActiveInMenu(order[i]);
      if(order[i] === 'sec-itinerario'){
        document.querySelectorAll('#sec-itinerario .it-item').forEach((it, idx) => { setTimeout(()=>it.classList.add('show'), idx*120); });
      }
    }
    show(0);

    document.getElementById('prevBtn').addEventListener('click',()=>show(current-1));
    document.getElementById('nextBtn').addEventListener('click',()=>show(current+1));

    window.addEventListener('keydown', (e) => {
      if(e.key==='ArrowRight') show(current+1);
      if(e.key==='ArrowLeft')  show(current-1);
      if(e.key==='Escape' && lb.classList.contains('open')) closeLb();
    });

    document.querySelectorAll('.magicBtn[data-target]').forEach(btn=>{
      btn.addEventListener('click',()=>{
        const tgt=btn.getAttribute('data-target');
        const i=order.indexOf(tgt);
        if(i>=0){ show(i); closeMenuOnMobile(); }
      });
    });

    /* ============================ MEN√ö LATERAL ============================ */
    const sideMenu=document.getElementById('sideMenu');
    const menuToggle=document.getElementById('menuToggle');
    sideMenu.querySelectorAll('a[data-goto]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const id=a.getAttribute('data-goto');
        const idx=order.indexOf(id);
        if(idx>=0){ show(idx); closeMenuOnMobile(); }
      });
    });
    function markActiveInMenu(id){ sideMenu.querySelectorAll('a').forEach(a=>a.classList.toggle('active', a.getAttribute('data-goto')===id)); }
    function closeMenuOnMobile(){ sideMenu.classList.remove('open'); }
    menuToggle.addEventListener('click',()=> sideMenu.classList.toggle('open'));

    /* ============================ AUDIO ============================ */
    const marcha=document.getElementById('marcha');
    const eternamente=document.getElementById('eternamente');
    const startOverlay=document.getElementById('startOverlay');
    const startBtn=document.getElementById('startBtn');
    const audioMsg=document.getElementById('audioMsg');
    const ringBtn=document.getElementById('ringBtn');
    const musicRetry=document.getElementById('musicRetry');

    // Fader
    async function fadeAudio(audio, from, to, duration=700){
      const steps=24, stepTime=duration/steps;
      audio.volume=Math.max(0,Math.min(1,from));
      return new Promise(res=>{
        let step=0;
        const id=setInterval(()=>{
          step++;
          audio.volume=Math.max(0,Math.min(1, from+(to-from)*(step/steps)));
          if(step>=steps){ clearInterval(id); audio.volume=Math.max(0,Math.min(1,to)); res(); }
        }, stepTime);
      });
    }

    // Reintentos y desbloqueo de audio para m√≥viles/estrictos
    async function tryPlay(audio){
      try{
        const p = audio.play();
        if(p && typeof p.then==='function'){ await p; }
        return true;
      }catch(err){
        console.warn('Reproducci√≥n bloqueada:', err);
        return false;
      }
    }
    async function unlockByInteraction(){
      if(typeof window.AudioContext!=='undefined'){
        try{
          const ctx=new AudioContext();
          if(ctx.state==='suspended'){ await ctx.resume(); }
        }catch(e){}
      }
    }
    function showMusicRetry(show){
      musicRetry.setAttribute('aria-hidden', show ? 'false' : 'true');
    }
    async function reintentarMusica(){
      await unlockByInteraction();
      marcha.volume=0;
      const ok = await tryPlay(marcha);
      if(ok){
        await fadeAudio(marcha,0,1,800);
        showMusicRetry(false);
        if(!startOverlay.classList.contains('hide')) startOverlay.classList.add('hide');
      }else{
        showMusicRetry(true);
      }
    }
    musicRetry.addEventListener('click', reintentarMusica);

    // Inicio expl√≠cito (bot√≥n ‚ÄúToca para comenzar‚Äù)
    async function iniciarInvitacion(){
      await unlockByInteraction();
      marcha.currentTime=0; marcha.volume=0;
      const ok = await tryPlay(marcha);
      if(ok){
        await fadeAudio(marcha,0,1,800);
        startOverlay.classList.add('hide');
        showMusicRetry(false);
      }else{
        audioMsg.style.display='block';
        showMusicRetry(true);
      }
    }
    startBtn.addEventListener('click', async ()=>{
      startBtn.disabled = true;
      await iniciarInvitacion();
      startBtn.disabled = false;
    });

    // Clic en anillo: crossfade a eternamente y navega a Familias
    ringBtn.addEventListener('click', async ()=>{
      if(!startOverlay.classList.contains('hide')){ await iniciarInvitacion(); }
      try{
        if(!marcha.paused){ await fadeAudio(marcha, marcha.volume||1, 0, 550); marcha.pause(); }
      }catch(e){}
      try{
        eternamente.currentTime=0; eternamente.volume=0;
        const ok = await tryPlay(eternamente);
        if(ok){ await fadeAudio(eternamente,0,1,800); }
        else { showMusicRetry(true); }
      }catch(e){}
      const idx = order.indexOf('sec-familias');
      if(idx>=0) show(idx);
    });

    // Overlay visible al cargar + contador en vivo desde el inicio
    window.addEventListener('load', ()=> {
      startOverlay.classList.remove('hide');
      tickMini(); tickMain();
    });

    /* ============================ CONTADORES ============================ */
    const target=new Date('2025-12-28T14:00:00'); // objetivo local 28/12/2025 14:00
    const pad=n=>String(n).padStart(2,'0');

    // Portada (mini)
    function animateMini(flipEl,newVal){
      const top=flipEl.querySelector('.top'); const bot=flipEl.querySelector('.bottom');
      if(top.textContent===newVal) return;
      bot.textContent=newVal;
      flipEl.classList.remove('animate'); void flipEl.offsetWidth; flipEl.classList.add('animate');
      setTimeout(()=>{ top.textContent=newVal; flipEl.classList.remove('animate'); },700);
    }
    function tickMini(){
      const now=new Date(); let diff=Math.max(0, target-now);
      const d=Math.floor(diff/86400000); diff-=d*86400000;
      const h=Math.floor(diff/3600000);  diff-=h*3600000;
      const m=Math.floor(diff/60000);    diff-=m*60000;
      const s=Math.floor(diff/1000);
      const flips=document.querySelectorAll('#miniFlip .flip-mini');
      const vals=[String(d), pad(h), pad(m), pad(s)];
      flips.forEach((f,i)=>animateMini(f, vals[i]));
    }
    setInterval(tickMini,1000);

    // Grande (itinerario)
    function animateFlip(flipEl,newVal){
      const top=flipEl.querySelector('.top'); const bottom=flipEl.querySelector('.bottom');
      if(top.textContent.trim()===newVal) return;
      bottom.textContent=newVal;
      flipEl.classList.remove('animate'); void flipEl.offsetWidth; flipEl.classList.add('animate');
      setTimeout(()=>{ top.textContent=newVal; flipEl.classList.remove('animate'); },700);
    }
    function tickMain(){
      const now=new Date(); let diff=Math.max(0, target-now);
      const days=Math.floor(diff/86400000); diff-=days*86400000;
      const hours=Math.floor(diff/3600000); diff-=hours*3600000;
      const mins=Math.floor(diff/60000);    diff-=mins*60000;
      const secs=Math.floor(diff/1000);
      const flips=[...document.querySelectorAll('#mainFlip .flip')];
      const vals=[String(days), pad(hours), pad(mins), pad(secs)];
      flips.forEach((f,i)=>animateFlip(f, vals[i]));
    }
    setInterval(tickMain,1000);

    /* ============================ LIGHTBOX ============================ */
    const lb=document.getElementById('lightbox');
    const lbImg=document.getElementById('lbImg');
    const lbClose=document.getElementById('lbClose');
    const lbPrev=document.getElementById('lbPrev');
    const lbNext=document.getElementById('lbNext');

    const lbTargets=[...document.querySelectorAll('.lb-target')];
    const lbSrcs=lbTargets.map(t=>t.dataset.src||t.getAttribute('src'));
    let lbIndex=0;

    lbTargets.forEach((t,i)=>t.addEventListener('click', ()=>openLb(i)));

    function openLb(i){
      lbIndex=i;
      lbImg.style.opacity=0;
      lbImg.src=lbSrcs[lbIndex];
      lb.classList.add('open');
      lb.setAttribute('aria-hidden','false');
      setTimeout(()=>{
        lbImg.style.transition='opacity .45s ease, transform .45s ease';
        lbImg.style.opacity=1; lbImg.style.transform='scale(1)';
      },40);
    }
    function closeLb(){
      lb.classList.remove('open'); lbImg.src='';
      lb.setAttribute('aria-hidden','true');
    }
    function lbShow(dir){
      lbIndex=(lbIndex+(dir>0?1:-1)+lbSrcs.length)%lbSrcs.length;
      const useFade=(lbIndex%2===0);
      if(useFade){
        lbImg.style.opacity=0;
        setTimeout(()=>{ lbImg.src=lbSrcs[lbIndex]; lbImg.style.opacity=1; },260);
      }else{
        lbImg.style.transform=dir>0?'translateX(-15%)':'translateX(15%)';
        lbImg.style.opacity=0;
        setTimeout(()=>{
          lbImg.src=lbSrcs[lbIndex];
          lbImg.style.transform='translateX(0)'; lbImg.style.opacity=1;
        },260);
      }
    }
    lbClose.addEventListener('click', closeLb);
    lbPrev.addEventListener('click', ()=>lbShow(-1));
    lbNext.addEventListener('click', ()=>lbShow(1));
    lb.addEventListener('click', (e)=>{ if(e.target===lb) closeLb(); });

    /* ============================ GALER√çA AUTO-FOCUS ============================ */
    const galleryImgs=[...document.querySelectorAll('#galleryGrid img')];
    let gIdx=0;
    function paintGallery(){ galleryImgs.forEach((im,i)=>im.style.opacity=(i===gIdx?1:.46)); }
    function gNext(){ gIdx=(gIdx+1)%galleryImgs.length; paintGallery(); }
    paintGallery();
    let gAuto=setInterval(gNext,4200);
    document.getElementById('prevGallery').addEventListener('click',()=>{ gIdx=(gIdx-1+galleryImgs.length)%galleryImgs.length; paintGallery(); });
    document.getElementById('nextGallery').addEventListener('click',()=>gNext());
    document.getElementById('galleryGrid').addEventListener('mouseenter',()=>{ clearInterval(gAuto); gAuto=null; });
    document.getElementById('galleryGrid').addEventListener('mouseleave',()=>{ if(!gAuto) gAuto=setInterval(gNext,4200); });

    /* ============================ CALENDARIO ============================ */
    document.getElementById('addCalendar').addEventListener('click',(e)=>{
      e.preventDefault();
      const start='20251228T140000', end='20251228T230000';
      const title=encodeURIComponent('Boda ‚Äî Abril & Pablo');
      const details=encodeURIComponent('Ceremonia y recepci√≥n ‚Äî Abril & Pablo');
      const location=encodeURIComponent('Iglesia Cristiana Palabra de Vida AD / Jard√≠n Los Abuelos, Tlaquiltenango, Morelos');
      const url=`https://www.google.com/calendar/render?action=TEMPLATE&text=${title}&dates=${start}/${end}&details=${details}&location=${location}`;
      window.open(url,'_blank','noopener');
    });

    /* ============================ CORAZONES ============================ */
    function spawnHeart(x,y){
      const heart=document.createElement('div');
      heart.className='magicHeart';
      const size=12+Math.random()*18; heart.style.width=heart.style.height=size+'px';
      heart.style.left=(x + (Math.random()*24-12))+'px'; heart.style.top=(y + (Math.random()*24-12))+'px';
      const r=Math.random();
      if(r<0.25) heart.style.background='radial-gradient(circle,#ffffff,#f0f0f0)';
      else if(r<0.5) heart.style.background='radial-gradient(circle,#4dc3ff,#bfeeff)';
      else if(r<0.75) heart.style.background='radial-gradient(circle,#c8c8c8,#ffffff)';
      else heart.style.background='radial-gradient(circle,#a7ffcf,#eafff0)';
      heart.style.clipPath='polygon(50% 0%,61% 15%,75% 15%,84% 27%,84% 45%,75% 60%,50% 80%,25% 60%,16% 45%,16% 27%,25% 15%,39% 15%)';
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 900+Math.random()*600);
    }
    document.addEventListener('mousemove',(e)=>{ if(Math.random()>0.6) return; spawnHeart(e.clientX,e.clientY); });
    document.addEventListener('touchmove',(e)=>{ const t=e.touches[0]; if(!t) return; if(Math.random()>0.6) return; spawnHeart(t.clientX,t.clientY); },{passive:true});
  </script>
</body>
</html>
 
